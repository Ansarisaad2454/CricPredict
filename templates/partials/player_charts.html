<div class="animate-fade-in-up bg-gray-900/60 p-8 rounded-3xl border border-yellow-500/20 shadow-2xl backdrop-blur-xl">
    
    <div class="flex justify-between items-start mb-8">
        <div>
            <h2 class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 to-amber-500 tracking-tight">
                {{ stats.name }}
            </h2>
            <div class="flex gap-3 mt-3">
                <span class="px-3 py-1 text-xs font-bold uppercase tracking-wide bg-yellow-500/10 text-yellow-400 rounded-full border border-yellow-500/20 shadow-[0_0_10px_rgba(234,179,8,0.1)]">
                    Matches: {{ stats.batting.matches }}
                </span>
                {% if stats.bowling.wickets > 0 %}
                <span class="px-3 py-1 text-xs font-bold uppercase tracking-wide bg-orange-500/10 text-orange-400 rounded-full border border-orange-500/20">
                    Wickets: {{ stats.bowling.wickets }}
                </span>
                {% endif %}
            </div>
        </div>
        <div class="text-right">
            <div class="text-5xl font-black text-white drop-shadow-md">{{ stats.batting.runs }}</div>
            <div class="text-xs text-yellow-500/80 font-bold uppercase tracking-wider mt-1">Total Runs</div>
        </div>
    </div>

    <div class="grid grid-cols-4 gap-4 mb-10">
        <div class="bg-black/30 p-4 rounded-2xl text-center border border-white/5 hover:border-yellow-500/30 transition-all">
            <div class="text-gray-500 text-[10px] font-bold uppercase tracking-widest mb-1">Avg</div>
            <div class="text-xl font-bold text-white">{{ stats.batting.avg }}</div>
        </div>
        <div class="bg-black/30 p-4 rounded-2xl text-center border border-white/5 hover:border-yellow-500/30 transition-all">
            <div class="text-gray-500 text-[10px] font-bold uppercase tracking-widest mb-1">SR</div>
            <div class="text-xl font-bold text-white">{{ stats.batting.sr }}</div>
        </div>
        <div class="bg-black/30 p-4 rounded-2xl text-center border border-white/5 hover:border-yellow-500/30 transition-all">
            <div class="text-gray-500 text-[10px] font-bold uppercase tracking-widest mb-1">100s</div>
            <div class="text-xl font-bold text-amber-400">{{ stats.batting['100s'] }}</div>
        </div>
        <div class="bg-black/30 p-4 rounded-2xl text-center border border-white/5 hover:border-yellow-500/30 transition-all">
            <div class="text-gray-500 text-[10px] font-bold uppercase tracking-widest mb-1">50s</div>
            <div class="text-xl font-bold text-yellow-200">{{ stats.batting['50s'] }}</div>
        </div>
    </div>

    <div class="relative h-64 w-full mb-2">
        <canvas id="playerFormChart"></canvas>
    </div>
    <p class="text-center text-[10px] font-bold uppercase tracking-widest text-gray-600">Runs scored in last 10 innings</p>
</div>

<script>
    (function() {
        const ctx = document.getElementById('playerFormChart').getContext('2d');
        
        if (window.myPlayerChart instanceof Chart) {
            window.myPlayerChart.destroy();
        }

        const recentForm = {{ stats.recent_form | tojson }};
        const labels = recentForm.map((_, i) => `Match ${i + 1}`);

        window.myPlayerChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Runs',
                    data: recentForm,
                    borderColor: '#fbbf24', // Amber-400
                    backgroundColor: (context) => {
                        const bg = context.chart.ctx.createLinearGradient(0, 0, 0, 200);
                        bg.addColorStop(0, 'rgba(251, 191, 36, 0.2)');
                        bg.addColorStop(1, 'rgba(251, 191, 36, 0)');
                        return bg;
                    },
                    borderWidth: 3,
                    pointBackgroundColor: '#18181b', // Gray-900
                    pointBorderColor: '#fbbf24',
                    pointBorderWidth: 2,
                    pointRadius: 4,
                    pointHoverRadius: 6,
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.9)',
                        titleColor: '#fbbf24',
                        bodyColor: '#fff',
                        borderColor: 'rgba(255,255,255,0.1)',
                        borderWidth: 1,
                        padding: 10,
                        displayColors: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: { color: 'rgba(255, 255, 255, 0.05)' },
                        ticks: { color: '#6b7280', font: { size: 10 } }
                    },
                    x: {
                        grid: { display: false },
                        ticks: { display: false }
                    }
                }
            }
        });
    })();
</script>